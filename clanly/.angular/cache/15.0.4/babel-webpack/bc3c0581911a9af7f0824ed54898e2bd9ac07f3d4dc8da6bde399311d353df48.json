{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component, Input } from '@angular/core';\nimport { FormControl, FormGroup } from '@angular/forms';\nlet SearchfiltersComponent = class SearchfiltersComponent {\n  constructor(api, route, search) {\n    this.api = api;\n    this.route = route;\n    this.search = search;\n    this.clans = [];\n    this.filterForm = new FormGroup({\n      user: new FormControl(),\n      clan: new FormControl(),\n      date: new FormControl()\n    });\n  }\n  ngOnChanges(changes) {\n    this.clans = changes['clans'].currentValue;\n  }\n  filter() {\n    let search = \"search=\" + this.route.snapshot.paramMap.get('search');\n    if (this.filterForm.value.user) {\n      search += \"&user=\" + this.filterForm.value.user;\n    }\n    if (this.filterForm.value.clan) {\n      search += \"&clan=\" + this.filterForm.value.clan;\n    }\n    if (this.filterForm.value.date) {\n      search += \"&date=\" + this.filterForm.value.date;\n    }\n    this.api.search(search).subscribe(data => {\n      if (data.hasOwnProperty('error')) {\n        alert(data.error);\n      } else {\n        this.posts = data.posts;\n        this.clans = data.clans;\n      }\n    });\n  }\n};\n__decorate([Input()], SearchfiltersComponent.prototype, \"clans\", void 0);\nSearchfiltersComponent = __decorate([Component({\n  selector: 'app-searchfilters',\n  templateUrl: './searchfilters.component.html',\n  styleUrls: ['./searchfilters.component.css']\n})], SearchfiltersComponent);\nexport { SearchfiltersComponent };","map":{"version":3,"mappings":";AAAA,SAASA,SAAS,EAAEC,KAAK,QAAkC,eAAe;AAC1E,SAASC,WAAW,EAAEC,SAAS,QAAQ,gBAAgB;AAShD,IAAMC,sBAAsB,GAA5B,MAAMA,sBAAsB;EAKjCC,YAAoBC,GAAe,EAAUC,KAAqB,EAAUC,MAA8B;IAAtF,QAAG,GAAHF,GAAG;IAAsB,UAAK,GAALC,KAAK;IAA0B,WAAM,GAANC,MAAM;IAJzE,UAAK,GAAQ,EAAE;IAKtB,IAAI,CAACC,UAAU,GAAG,IAAIN,SAAS,CAAC;MAC9BO,IAAI,EAAE,IAAIR,WAAW,EAAE;MACvBS,IAAI,EAAE,IAAIT,WAAW,EAAE;MACvBU,IAAI,EAAE,IAAIV,WAAW;KACtB,CAAC;EACJ;EAEAW,WAAW,CAACC,OAAsB;IAChC,IAAI,CAACC,KAAK,GAAGD,OAAO,CAAC,OAAO,CAAC,CAACE,YAAY;EAC5C;EAEAC,MAAM;IACJ,IAAIT,MAAM,GAAG,SAAS,GAAG,IAAI,CAACD,KAAK,CAACW,QAAQ,CAACC,QAAQ,CAACC,GAAG,CAAC,QAAQ,CAAC;IACnE,IAAI,IAAI,CAACX,UAAU,CAACY,KAAK,CAACX,IAAI,EAAE;MAC9BF,MAAM,IAAI,QAAQ,GAAG,IAAI,CAACC,UAAU,CAACY,KAAK,CAACX,IAAI;;IAEjD,IAAI,IAAI,CAACD,UAAU,CAACY,KAAK,CAACV,IAAI,EAAE;MAC9BH,MAAM,IAAI,QAAQ,GAAG,IAAI,CAACC,UAAU,CAACY,KAAK,CAACV,IAAI;;IAEjD,IAAI,IAAI,CAACF,UAAU,CAACY,KAAK,CAACT,IAAI,EAAE;MAC9BJ,MAAM,IAAI,QAAQ,GAAG,IAAI,CAACC,UAAU,CAACY,KAAK,CAACT,IAAI;;IAEjD,IAAI,CAACN,GAAG,CAACE,MAAM,CAACA,MAAM,CAAC,CAACc,SAAS,CAAEC,IAAS,IAAI;MAC9C,IAAIA,IAAI,CAACC,cAAc,CAAC,OAAO,CAAC,EAAE;QAChCC,KAAK,CAACF,IAAI,CAACG,KAAK,CAAC;OAClB,MACI;QACH,IAAI,CAACC,KAAK,GAAGJ,IAAI,CAACI,KAAK;QACvB,IAAI,CAACZ,KAAK,GAAGQ,IAAI,CAACR,KAAK;;IAE3B,CAAC,CAAC;EACJ;CAED;AAtCUa,YAAR3B,KAAK,EAAE,qDAAiB;AADdG,sBAAsB,eALlCJ,SAAS,CAAC;EACT6B,QAAQ,EAAE,mBAAmB;EAC7BC,WAAW,EAAE,gCAAgC;EAC7CC,SAAS,EAAE,CAAC,+BAA+B;CAC5C,CAAC,GACW3B,sBAAsB,CAuClC;SAvCYA,sBAAsB","names":["Component","Input","FormControl","FormGroup","SearchfiltersComponent","constructor","api","route","search","filterForm","user","clan","date","ngOnChanges","changes","clans","currentValue","filter","snapshot","paramMap","get","value","subscribe","data","hasOwnProperty","alert","error","posts","__decorate","selector","templateUrl","styleUrls"],"sourceRoot":"","sources":["/home/gui/TPW/tpw-projeto2/clanly/src/app/components/searchresults/searchfilters/searchfilters.component.ts"],"sourcesContent":["import { Component, Input, OnChanges, SimpleChanges } from '@angular/core';\nimport { FormControl, FormGroup } from '@angular/forms';\nimport { ApiService } from 'src/app/services/api-service.service';\nimport { ActivatedRoute } from '@angular/router';\n\n@Component({\n  selector: 'app-searchfilters',\n  templateUrl: './searchfilters.component.html',\n  styleUrls: ['./searchfilters.component.css']\n})\nexport class SearchfiltersComponent implements OnChanges {\n  @Input() clans: any = [];\n\n  filterForm: FormGroup | any;\n\n  constructor(private api: ApiService, private route: ActivatedRoute, private search: SearchresultsComponent) {\n    this.filterForm = new FormGroup({\n      user: new FormControl(),\n      clan: new FormControl(),\n      date: new FormControl(),\n    });\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n    this.clans = changes['clans'].currentValue;\n  }\n\n  filter() {\n    let search = \"search=\" + this.route.snapshot.paramMap.get('search');\n    if (this.filterForm.value.user) {\n      search += \"&user=\" + this.filterForm.value.user;\n    }\n    if (this.filterForm.value.clan) {\n      search += \"&clan=\" + this.filterForm.value.clan;\n    }\n    if (this.filterForm.value.date) {\n      search += \"&date=\" + this.filterForm.value.date;\n    }\n    this.api.search(search).subscribe((data: any) => {\n      if (data.hasOwnProperty('error')) {\n        alert(data.error);\n      }\n      else {\n        this.posts = data.posts;\n        this.clans = data.clans;\n      }\n    });\n  }\n\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}